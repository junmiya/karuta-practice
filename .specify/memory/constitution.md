<!--
================================================================================
SYNC IMPACT REPORT
================================================================================
Version change: 10.0.0 → 11.0.0 (MAJOR)

Modified sections:
  - 構造変更: 単一ファイル → ハブ + 2分割ファイル体制に移行

Removed sections: なし（内容は全て保持、2ファイルに分割）

Templates requiring updates:
  - ✅ plan-template.md - Constitution Checkは汎用的で更新不要
  - ✅ spec-template.md - 汎用的で更新不要
  - ✅ tasks-template.md - 汎用的で更新不要

Follow-up TODOs: なし
================================================================================
-->

# 百人一首プロジェクト 憲法（Constitution）

あなたは「百人一首PJ（Web競技サービス）」の段階的開発を支援する実装仕様生成エージェントである。
段階0（MVP最小）は完了し、段階1では「運用の自動化」にフォーカスする。

本憲法は以下の2ファイルで構成される：

---

## デザインルール（UI・ビジュアル・UX）

**ファイル**: [design-rules.md](./design-rules.md)

UI表示・レイアウト・コンポーネント設計に関するルール。

| 原則 | 内容 |
|------|------|
| 原則03 | デバイス方針 — 全モード12枚固定 |
| 原則04 | 札の縦横比 — 73:52 |
| 原則05 | 用語統一 — yomi/tori/kimariji |
| 原則20 | タブ構成 — 手引・手習・稽古・歌合・結び・歌位（6タブ） |
| 原則21 | アクセス方針 — 手引/手習はログイン不要 |
| 原則22 | グリッド方針 — 4×3/3×4 自動切替 |
| 原則24 | デザイン参照 — 東大サイトの設計思想 |
| 原則25 | コンポーネント共通化 — 同一部品を再利用 |

---

## 設計原則（ビジネスロジック・技術方針・データモデル）

**ファイル**: [architecture-principles.md](./architecture-principles.md)

プロジェクト目的・スコープ・技術スタック・データモデル・セキュリティに関する原則。

| 原則 | 内容 |
|------|------|
| 原則01 | 目的 — 百人一首の研鑽〜公式競技をWebで提供 |
| 原則02 | 段階0スコープ — 公式競技+番付+12枚UI |
| 原則06 | データソース — poems.seed.json |
| 原則07 | 公式性の定義 — サーバ検証・確定が必須 |
| 原則08 | Cloud Functions方針 — 段階1で本数制限撤廃 |
| 原則09 | シーズン方針 — 年4回、英語seasonId |
| 原則10 | 部門・エントリー方針 — 級位/段位の部 |
| 原則11 | 番付・プライバシー方針 — ニックネームのみ表示 |
| 原則12 | 日付境界 — JST 00:00〜23:59 |
| 原則13 | コスト方針 — 月1万円まで許容 |
| 原則14 | 段階1スコープ — 公式競技の自動運用 |
| 原則15 | シーズン状態遷移 — open→frozen→finalized→archived |
| 原則16 | 集計ルール — 日別上位3セット反映 |
| 原則17 | 称号ルール — 名人(4回)/永世(8回) |
| 原則18 | 課金方針 — 月額自動更新、返金なし |
| 原則19 | 異常値判定拡張 — 分布逸脱等 |
| 原則23 | サーバ権限 — 公式領域はサーバのみ更新 |

**付録（同ファイル内）**: 技術スタック、データモデル（段階0/1）、セッション状態遷移、スコア計算式、異常値判定、セキュリティルール、出力ルール、Scheduled Functions

---

**Version**: 11.0.0 | **Ratified**: 2026-01-17 | **Last Amended**: 2026-02-08
